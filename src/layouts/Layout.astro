---
import Footer from "../components/Footer/Footer.astro"
import CookieConsentWrapper from "../components/CookieConsent/CookieConsentWrapper"
import CookieDebugPanel from "../components/CookieConsent/CookieDebugPanel"
import "../styles/main.css"
import { ClientRouter } from "astro:transitions"
import { buildSiteUrl } from "../config/site.js"
import { BottomMenu } from "../components/BottomMenu"
import { TopHeader } from "../components/TopHeader"

export interface Props {
 title?: string
 bandImage?: string
 description?: string
 image?: string
}

const {
 title = "BBooFest 2025",
 bandImage,
 description = "Festival de música independiente. 26-27 de Octubre en Summer Land (Toledo). ¡Vuelve el mejor festival para todas las edades del Universo!",
 image = "/cartel-cuadrado-ok.jpg",
} = Astro.props
---

<!doctype html>
<html lang='en'>
 <head>
  <meta charset='UTF-8' />
  <meta name='viewport' content='width=device-width' />
  <link rel='icon' type='image/svg+xml' href={buildSiteUrl("/favicon.svg")} />
  <meta name='generator' content={Astro.generator} />
  {bandImage && <link rel='preload' as='image' href={bandImage} />}

  <!-- Meta tags básicos -->
  <title>{title}</title>
  <meta name='description' content={description} />
  <meta name='author' content='Balambam Boo Fest' />

  <!-- Open Graph / Facebook -->
  <meta property='og:type' content='website' />
  <meta property='og:url' content={Astro.url.href} />
  <meta property='og:title' content={title} />
  <meta property='og:description' content={description} />
  <meta
   property='og:image'
   content={new URL(buildSiteUrl(image), Astro.url).href}
  />
  <meta property='og:image:width' content='1200' />
  <meta property='og:image:height' content='630' />
  <meta property='og:site_name' content='BBooFest 2025' />
  <meta property='og:locale' content='es_ES' />

  <!-- Twitter Card -->
  <meta name='twitter:card' content='summary_large_image' />
  <meta name='twitter:url' content={Astro.url.href} />
  <meta name='twitter:title' content={title} />
  <meta name='twitter:description' content={description} />
  <meta
   name='twitter:image'
   content={new URL(buildSiteUrl(image), Astro.url).href}
  />
  <meta name='twitter:site' content='@balambamboofest' />

  <!-- Otros meta tags importantes -->
  <meta name='theme-color' content='#8B5CF6' />
  <meta name='msapplication-TileColor' content='#8B5CF6' />
  <link rel='canonical' href={Astro.url.href} />
 </head>
 <body>
  <!-- TopHeader solo visible en pantallas ≥768px -->
  <div class='desktop-only'>
   <TopHeader currentPath={Astro.url.pathname} client:load />
  </div>

  <main class='main-content'>
   <slot />
  </main>

  <!-- Footer solo visible en pantallas ≥768px -->
  <div class='desktop-only'>
   <Footer />
  </div>

  <!-- BottomMenu solo visible en pantallas <768px -->
  <div class='mobile-only'>
   <BottomMenu currentPath={Astro.url.pathname} client:load />
  </div>

  <CookieConsentWrapper client:load />
  <CookieDebugPanel client:load />
  <ClientRouter />
 </body>
</html>

<style>
 html,
 body {
  margin: 0;
  width: 100%;
  min-height: 100vh;
 }

 .main-content {
  min-height: calc(100vh - 80px - 200px); /* 100vh - TopHeader - Footer aprox */
 }

 /* Clases para controlar la visibilidad según el viewport */
 .desktop-only {
  display: block;
 }

 .mobile-only {
  display: none;
 }

 /* En pantallas pequeñas (≤767px): ocultar elementos desktop, mostrar elementos mobile */
 @media (max-width: 767px) {
  .desktop-only {
   display: none;
  }

  .mobile-only {
   display: block;
  }

  .main-content {
   padding-top: 0; /* No padding top en móviles */
   min-height: calc(100vh - 82px); /* 100vh - BottomMenu */
  }
 }

 /* En pantallas medianas y grandes (≥768px): mostrar elementos desktop, ocultar elementos mobile */
 @media (min-width: 768px) {
  .desktop-only {
   display: block;
  }

  .mobile-only {
   display: none;
  }

  .main-content {
   min-height: calc(100vh - 80px - 200px); /* 100vh - TopHeader - Footer */
  }
 }
</style>
